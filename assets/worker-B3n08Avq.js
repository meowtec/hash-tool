self.document={currentScript:{src:self.location.href}},function(){"use strict";(async()=>{var A="https://meowtec.github.io/hash-tool/assets/hash_tool_bg-CqHhwH6O.wasm",S=async(t={},e)=>{let n;if(e.startsWith("data:")){const s=e.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(s,"base64");else if(typeof atob=="function"){const c=atob(s);r=new Uint8Array(c.length);for(let a=0;a<c.length;a++)r[a]=c.charCodeAt(a)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(r,t)}else{const s=await fetch(e),r=s.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(s,t);else{const c=await s.arrayBuffer();n=await WebAssembly.instantiate(c,t)}}return n.instance.exports};let o;function L(t){o=t}const x=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let w=new x("utf-8",{ignoreBOM:!0,fatal:!0});w.decode();let f=null;function l(){return(f===null||f.byteLength===0)&&(f=new Uint8Array(o.memory.buffer)),f}function B(t,e){return t=t>>>0,w.decode(l().subarray(t,t+e))}let h=0;const E=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let u=new E("utf-8");const R=typeof u.encodeInto=="function"?function(t,e){return u.encodeInto(t,e)}:function(t,e){const n=u.encode(t);return e.set(n),{read:t.length,written:n.length}};function U(t,e,n){if(n===void 0){const i=u.encode(t),d=e(i.length,1)>>>0;return l().subarray(d,d+i.length).set(i),h=i.length,d}let s=t.length,r=e(s,1)>>>0;const c=l();let a=0;for(;a<s;a++){const i=t.charCodeAt(a);if(i>127)break;c[r+a]=i}if(a!==s){a!==0&&(t=t.slice(a)),r=n(r,s,s=a+t.length*3,1)>>>0;const i=l().subarray(r+a,r+s),d=R(t,i);a+=d.written,r=n(r,s,a,1)>>>0}return h=a,r}function z(t,e){const n=e(t.length*1,1)>>>0;return l().set(t,n/1),h=t.length,n}function C(t,e){return t=t>>>0,l().subarray(t/1,t/1+e)}const y=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>o.__wbg_hashdigest_free(t>>>0,1));class K{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,y.unregister(this),e}free(){const e=this.__destroy_into_raw();o.__wbg_hashdigest_free(e,0)}constructor(e){const n=U(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=h,r=o.hashdigest_new(n,s);return this.__wbg_ptr=r>>>0,y.register(this,this.__wbg_ptr,this),this}update(e){const n=z(e,o.__wbindgen_malloc),s=h;o.hashdigest_update(this.__wbg_ptr,n,s)}finalize(){const e=this.__destroy_into_raw(),n=o.hashdigest_finalize(e);var s=C(n[0],n[1]).slice();return o.__wbindgen_free(n[0],n[1]*1,1),s}}function M(){const t=o.__wbindgen_export_0,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}function O(t,e){throw new Error(B(t,e))}URL=globalThis.URL;const _=await S({"./hash_tool_bg.js":{__wbindgen_throw:O,__wbindgen_init_externref_table:M}},A),W=_.memory,D=_.__wbg_hashdigest_free,k=_.hashdigest_new,v=_.hashdigest_update,I=_.hashdigest_finalize,q=_.__wbindgen_export_0,j=_.__wbindgen_malloc,F=_.__wbindgen_realloc,H=_.__wbindgen_free,p=_.__wbindgen_start;var N=Object.freeze({__proto__:null,__wbg_hashdigest_free:D,__wbindgen_export_0:q,__wbindgen_free:H,__wbindgen_malloc:j,__wbindgen_realloc:F,__wbindgen_start:p,hashdigest_finalize:I,hashdigest_new:k,hashdigest_update:v,memory:W});L(N),p();const P=(t,e)=>({isTaskMessage:!0,type:t,data:e});class G{constructor(e){this.data=e}get byteLength(){return this.data.byteLength}read(e,n){const s=Math.min(n,this.byteLength-e);return Promise.resolve(new Uint8Array(this.data.buffer,this.data.byteOffset+e,this.data.byteOffset+e+s))}}class V{constructor(e){this.data=e}get byteLength(){return this.data.size}async read(e,n){const s=await this.data.slice(e,e+n).arrayBuffer();return new Uint8Array(s)}}function g(t,e){globalThis.postMessage(P(t,e))}const Z=1024*1024*8,b=new Set;function m(t){b.delete(t)}async function $({type:t,data:e,id:n}){const s=performance.now(),r=new K(t),c=e instanceof Blob?new V(e):new G(e),{byteLength:a}=c;let i=0;for(b.add(n);i<a;){if(!b.has(n)){g("TASK_RESULT",{id:n,success:!1,error:"Task cancel"});return}const T=await c.read(i,Z);r.update(T),i+=T.byteLength,g("TASK_PROGRESS",{id:n,processedBytes:i,totalBytes:a})}const d=r.finalize();m(n),g("TASK_RESULT",{id:n,hash:d,success:!0,totalBytes:a,timing:performance.now()-s})}globalThis.onmessage=t=>{if(!t.data?.isTaskMessage)return;const e=t.data;e.type==="TASK_ADD"&&$(e.data).catch(n=>{g("TASK_RESULT",{id:e.data.id,success:!1,error:String(n)})}),e.type==="TASK_CANCEL"&&m(e.data.id)},globalThis.postMessage("INIT")})()}();
